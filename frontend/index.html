<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spidey - Your English Learning Companion ğŸ•·ï¸</title>
  
  <!-- Clean font -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  
  <!-- FULL-SCREEN IMMERSIVE LAYOUT -->
  <div class="immersive-container">
    
    <!-- 3D Avatar (Full Screen Background) -->
    <div id="canvas-container" aria-label="Spidey - Your English Companion">
      <div id="avatar-scroll-safe"></div>
    </div>

    <!-- small mic container (bottom-left) -->
    <div id="mic-container" aria-hidden="false">
      <button id="micBtn" class="mic-small" title="Talk to Spidey" aria-label="Talk to Spidey">
        ğŸ¤
      </button>
    </div>

    <!-- compact caption overlay (bottom center) -->
    <div id="chatCaption" class="chat-caption" role="status" aria-live="polite">
      Ready to chat? ğŸ‘‹
    </div>

    <!-- Floating Chat Bubble (Bottom Center - Replika Style) -->
    <div id="chatBubble" class="chat-bubble">
      <div class="bubble-content">
        <span id="bubbleText">Hey friend! Click the mic to start chatting... ğŸ‘‹</span>
      </div>
    </div>

    <!-- Caption Box (Speech Display) -->
    <div id="caption-box" class="caption-box">
      <div class="caption-icon">ğŸ’¬</div>
      <div id="caption-text" class="caption-text">
        Ready to chat...
      </div>
    </div>

    <!-- Status Message (Top Center) -->
    <div id="status" class="status-message" aria-live="polite">
      Hey friend! Ready to chat? ğŸ‘‹
    </div>

    <!-- Hidden Menu Toggle (Top Right Corner) -->
    <button id="menuToggle" class="menu-toggle" title="Options">â‹®</button>
    
    <!-- Slide-in Menu Panel -->
    <div id="menuPanel" class="menu-panel">
      <div class="menu-header">
        <h3>Settings</h3>
        <button id="menuClose" class="menu-close">Ã—</button>
      </div>
      
      <div class="menu-content">
        <!-- Mode Toggle -->
        <div class="menu-item">
          <label>Conversation Mode</label>
          <button id="modeToggle" class="mode-toggle-btn">
            <span class="mode-label">Casual Chat</span>
            <div class="toggle-switch"></div>
          </button>
          <p class="menu-hint">Casual = fun chat â€¢ Practice = grammar help</p>
        </div>

        <!-- Actions -->
        <div class="menu-item">
          <button id="clearBtn" class="menu-action-btn">
            ğŸ”„ Start Fresh Conversation
          </button>
        </div>

        <div class="menu-item">
          <button id="demoLessonBtn" class="menu-action-btn">
            ğŸ¯ Daily Challenge
          </button>
        </div>

        <!-- Debug Log (Collapsible) -->
        <details class="menu-item">
          <summary>Debug Log</summary>
          <div id="log" class="debug-log"></div>
        </details>
      </div>
    </div>

    <!-- Overlay for menu -->
    <div id="menuOverlay" class="menu-overlay"></div>

  </div>

  <!-- External Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>

  <!-- App Entry Point -->
  <script type="module" src="/src/app.js"></script>
</body>
</html>
