<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>English Learning Companion âœ¨</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  
  <div class="immersive-container">
    
    <!-- 3D Avatar -->
    <div id="canvas-container" aria-label="Your English Companion">
      <div id="avatar-scroll-safe"></div>
    </div>

    <!-- Mic Button (bottom-left) -->
    <div id="mic-container" aria-hidden="false">
      <button id="micBtn" class="mic-small" title="Start conversation">
        ðŸŽ¤
      </button>
    </div>

    <!-- AI Reply Caption (bottom center - minimalist) -->
    <div id="chatCaption" class="chat-caption" role="status" aria-live="polite">
      Ready to chat! ðŸ’­
    </div>

    <!-- Status (top center) -->
    <div id="status" class="status-message" aria-live="polite">
      Ready to chat! ðŸ’­
    </div>

    <!-- Menu Toggle (top right) -->
    <button id="menuToggle" class="menu-toggle" title="Options">â‹®</button>
    
    <!-- Settings Menu Panel -->
    <div id="menuPanel" class="menu-panel">
      <div class="menu-header">
        <h3>Settings</h3>
        <button id="menuClose" class="menu-close">Ã—</button>
      </div>
      
      <div class="menu-content">
        <!-- Mode Toggle -->
        <div class="menu-item">
          <label>Conversation Mode</label>
          <button id="modeToggle" class="mode-toggle-btn">
            <span class="mode-label">Casual Chat</span>
            <div class="toggle-switch"></div>
          </button>
          <p class="menu-hint">Casual = friendly chat â€¢ Practice = grammar help</p>
        </div>

        <!-- Practice Mode Corrections (Only visible in Practice Mode) -->
        <div id="correctionDisplay" class="menu-item" style="display: none;">
          <label>Latest Correction</label>
          <div id="correctionContent" class="correction-display"></div>
        </div>

        <!-- Actions -->
        <div class="menu-item">
          <button id="clearBtn" class="menu-action-btn">
            ðŸ”„ Start Fresh Conversation
          </button>
        </div>

        <div class="menu-item">
          <button id="demoLessonBtn" class="menu-action-btn">
            âœ¨ Daily Challenge
          </button>
        </div>

        <!-- Debug Log -->
        <details class="menu-item">
          <summary>Debug Log</summary>
          <div id="log" class="debug-log"></div>
        </details>
      </div>
    </div>

    <!-- Overlay -->
    <div id="menuOverlay" class="menu-overlay"></div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
  <script type="module" src="/src/app.js"></script>
</body>
</html>